# JS interview

ç›‘å¬äº‹ä»¶çš„å…¼å®¹æ€§å†™æ³•ï¼›å–æ¶ˆç›‘å¬äº‹ä»¶ï¼›

å¸¸è§çš„æµè§ˆå™¨æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ

> ä¸¥æ ¼æ¨¡å¼ã€æ··åˆæ¨¡å¼ï¼ˆæ€ªå¼‚ç›’æ¨¡å‹/ï¼‰ã€å…¼å®¹æ¨¡å¼ï¼ˆå·²ç»è¢«æ·˜æ±°ï¼‰ï¼›

`typeof` è¿”å›å“ªäº›æ•°æ®ç±»å‹ï¼Ÿ

> object, string, number, undefined, function, symbol

é“¶è¡Œæ”¯ä»˜ï¼šé€šè”ï¼Œé“¶è”ï¼›

æŸ¥è¯¢ï¼š query

å…¼å®¹æ€§å†™æ³•

```javascript
var ev = event || window.event
var width = document.documentElement.clientWidth || document.body.clientWidth
var target = event.srcElement || event.target
```

ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶ï¼Ÿ

> å¯ä»¥è®¿é—®è¯·æ±‚å’Œå“åº”å¯¹è±¡ï¼Œå¯ä»¥è®¿é—®ä¸­é—´ä»¶çš„åŠŸèƒ½ï¼Œå¯ä»¥æ‰§è¡Œä»»ä½•ä»£ç ï¼Œé€šè¿‡ next è°ƒç”¨å †æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶

æˆªå–å­—ç¬¦ä¸² 'abcdefg' çš„ efg

```javascript
var str = 'abcdefg'
console.log(str.substring(4))
```

js ä¸­å¦‚ä½•å®ç°ç»§æ‰¿

- æ„é€ ç»§æ‰¿
- åŸå‹ç»§æ‰¿
- å®ä¾‹ç»§æ‰¿

js å»¶è¿ŸåŠ è½½çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ

1. deferå’Œasync
2. åŠ¨æ€åˆ›å»ºDOM <script> æ ‡ç­¾ï¼ˆåˆ›å»ºscriptï¼Œæ’å…¥åˆ°DOMä¸­ï¼ŒåŠ è½½å®Œæ¯•åcallBackï¼‰
3. æŒ‰éœ€å¼‚æ­¥è½½å…¥js

ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼Œåœ¨ JS ä¸­å“ªäº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿ
> ä¸å†ç”¨åˆ°çš„å†…å­˜ï¼Œæ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œå°±æ˜¯ memory leak;

- å…¨å±€å˜é‡
- è®¡æ—¶å™¨æ²¡æœ‰å…³é—­
- é—­åŒ…
- é‡ç½®å°æ—¥å¿—
- ä¸¤ä¸ªå¯¹è±¡éƒ½å­˜åœ¨ä¸”å½¼æ­¤å¼•ç”¨ï¼Œç”±æ­¤äº§ç”Ÿäº†ä¸€ä¸ªå¾ªç¯

è¯·è°ˆä¸€ä¸‹ JavaScript ä¸­çš„åƒåœ¾å›æ”¶æœºåˆ¶
> JavaScript ä¸­ä½¿ç”¨è®¡æ•°å›æ”¶ï¼Œå®ƒå®šæœŸæ‰«æå¯¹è±¡ï¼Œå¹¶è®¡ç®—å¼•ç”¨äº†æ¯ä¸ªå¯¹è±¡çš„å…¶ä»–å¯¹è±¡çš„æ•°é‡ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æ•°é‡ä¸º 0ï¼ˆæ²¡æœ‰å…¶ä»–å¯¹è±¡å¼•ç”¨è¿‡è¯¥å¯¹è±¡ï¼‰ï¼Œæˆ–å¯¹è¯¥å¯¹è±¡çš„æƒŸä¸€å¼•ç”¨æ˜¯å¾ªç¯çš„ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„å†…å­˜å³å¯å›æ”¶

`iframe` çš„ä¼˜ç¼ºç‚¹

ä¼˜ç‚¹ï¼š
1. è§£å†³åŠ è½½ç¼“æ…¢çš„ç¬¬ä¸‰æ–¹å†…å®¹å¦‚å›¾æ ‡å’Œå¹¿å‘Šç­‰çš„åŠ è½½é—®é¢˜
2. Security sandbox
3. å¹¶è¡ŒåŠ è½½è„šæœ¬

ç¼ºç‚¹ï¼š
1. iframeä¼šé˜»å¡ä¸»é¡µé¢çš„Onloadäº‹ä»¶
2. å³ä½¿å†…å®¹ä¸ºç©ºï¼ŒåŠ è½½ä¹Ÿéœ€è¦æ—¶é—´
3. æ²¡æœ‰è¯­æ„

å¦‚ä½•å¯¹èŠ‚ç‚¹è¿›è¡Œå¢åˆ æ”¹ï¼Ÿ

> `appendChild/removeChild/`

JS å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼æœ‰å“ªäº›? [tbc]

> å•ä¾‹æ¨¡å¼/è§‚å¯Ÿæ¨¡å¼/å·¥å‚æ¨¡å¼

ä»€ä¹ˆæ˜¯é—­åŒ…?

> å¤–éƒ¨å‡½æ•°è®¿é—®å†…éƒ¨å‡½æ•°å˜é‡çš„è¿‡ç¨‹ç§°ä½œé—­åŒ…; åœ¨ es6 ä¸­ let ç”Ÿæˆçš„å—çº§ä½œç”¨åŸŸå°±æ˜¯ä¸ºäº†æ›¿ä»£é—­åŒ…çš„;

é—­åŒ…çš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›?

> åŠŸèƒ½(æ¨¡å—)ä¸Šçš„å°è£…;

è¯·æè¿°ä¸‹é—­åŒ…çš„ä¼˜/ç¼ºç‚¹?

> å»¶é•¿å‡½æ•°çš„ç”Ÿå‘½å‘¨æœŸ/é˜²æ­¢å…¨å±€ç©ºé—´çš„æ±¡æŸ“; å¹²æ‰°åƒåœ¾æ¸…ç†æœºåˆ¶/å†…å­˜æ³„æ¼

åŸå‹å’ŒåŸå‹é“¾

> æ¯ä¸ªå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå¯¹è±¡ä»¥å…¶åŸå‹ä¸ºæ¨¡æ¿ã€ä»åŸå‹ç»§æ‰¿æ–¹æ³•å’Œå±æ€§ã€‚åŸå‹å¯¹è±¡ä¹Ÿå¯èƒ½æ‹¥æœ‰åŸå‹ï¼Œå¹¶ä»ä¸­ç»§æ‰¿æ–¹æ³•å’Œå±æ€§ï¼Œä¸€å±‚ä¸€å±‚ã€ä»¥æ­¤ç±»æ¨ã€‚è¿™ç§å…³ç³»å¸¸è¢«ç§°ä¸ºåŸå‹é“¾ (prototype chain)ï¼Œå®ƒè§£é‡Šäº†ä¸ºä½•ä¸€ä¸ªå¯¹è±¡ä¼šæ‹¥æœ‰å®šä¹‰åœ¨å…¶ä»–å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ã€‚(mdn)[]

æˆªå–å­—ç¬¦ä¸²ç”±å“ªäº›æ–¹æ³•

- `string.slice()`ï¼›
- `string.substring()`;
- `string.substr()`;
- åˆ©ç”¨ `''` æ¥

å¦‚ä½•æ£€æµ‹æ•°ç»„å’Œå­—ç¬¦ä¸²

- isArray();
- x instanceOf Array

å¦‚ä½•è¿›è¡Œè·¨åŸŸæ“ä½œï¼Ÿ

> - CORS

å¦‚ä½•å°†ä¼ªæ•°ç»„è½¬åŒ–ä¸ºæ•°ç»„ï¼Ÿ

> `array.prototype.slice.call(fakearray)`;

æè¿°ä¸‹è¿™å››ä¸ªæ•°ç»„æ–¹æ³• `push/pop/shift/unshift` ;


## Basic

å‰ç«¯æ¨¡å—åŒ–è§„èŒƒæ ‡å‡†

- ä»€ä¹ˆæ˜¯æ¨¡å—? æ¨¡å—çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ?

  > æ¨¡å—: å®ç°ç‰¹å®šåŠŸèƒ½ä¸”ç›¸äº’ç‹¬ç«‹çš„ä¸€ç»„æ–¹æ³•; æ–¹ä¾¿ç®¡ç†, æé«˜å¤ç”¨æ€§;

- ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ¨¡å—åŒ–è§„èŒƒæ ‡å‡†?

  > ä¸ºäº†è®©å¤§å®¶èƒ½æ–¹ä¾¿çš„åŠ è½½å„ç§æ¨¡å—ï¼Œå› æ­¤éœ€è¦ä¸€å¥—ç¼–å†™æ¨¡å—çš„è§„èŒƒ;

- æœ‰å“ªäº›æ¨¡å—åŒ–è§„èŒƒ

  > CMD, åŒæ­¥åŠ è½½æ¨¡å—; AMD, éåŒæ­¥åŠ è½½æ¨¡å—; CommonJS;

`call` ä¸ `apply` çš„å¼‚åŒ

- ä¸¤è€…éƒ½æ˜¯ä¸ºäº†æ”¹å˜æŸä¸ªå‡½æ•°è¿è¡Œæ—¶çš„ context ï¼Œå³æ”¹å˜ this çš„æŒ‡å‘
- ä¸¤è€…ä½œç”¨å®Œå…¨ç›¸åŒï¼Œä½†å‰è€…æ¥å—ä¸€ä¸ªä¸ªå‚æ•°çš„ä¼ å…¥ï¼Œåè€…æ¥å—æ•°ç»„ä¸ºå‚æ•°

JavaScript çš„å†…ç½®å¯¹è±¡å’Œå®¿ä¸»å¯¹è±¡ï¼Ÿ

- å†…ç½®ï¼š Object, Array, Function, Data, Math
- å®¿ä¸»ï¼š æµè§ˆå™¨è‡ªå¸¦çš„ Window

`window.onload` å’Œ `document.ready` çš„åŒºåˆ«

- å‰è€…æ˜¯å½“æ–‡æ¡£æ ‘å’Œæ‰€æœ‰æ–‡ä»¶åŠ è½½å®Œåæ‰§è¡Œå‡½æ•°
- åè€…æ˜¯æŒ‡å½“æ–‡æ¡£æ ‘åŠ è½½å®Œæ¯•åæ‰§è¡Œçš„å‡½æ•°

AMD(Modules/Asychronous-Definition), CMD(Common Module Definition), CommonJS è§„èŒƒåŒºåˆ«ï¼Ÿ

- AMD æ˜¯å¼‚æ­¥åŠ è½½è§„èŒƒï¼ŒCMD æ˜¯åŒæ­¥åŠ è½½è§„èŒƒ
- å¯¹äºä¾èµ–çš„æ¨¡å—ï¼ŒAMDæå‰å¼•å…¥ï¼ŒCMDæ˜¯æŒ‰éœ€å¼•å…¥
- CMD æ¨å´‡ä¾èµ–å°±è¿‘ï¼ŒAMD æ¨å´‡ä¾èµ–å‰ç½®
- CommonJS æ˜¯æŒ‰éœ€å¼•å…¥ï¼Œæ ¸å¿ƒçš„æ¥å—å’Œæš´éœ²

  - é€šè¿‡ `require()` è¿›è¡Œæ¥å—
  - é€šè¿‡ `module.export` è¿›è¡Œæš´éœ²

æ·±æ‹·è´å’Œæµ…æ‹·è´(shallow copy)çš„åŒºåˆ«

- æµ…æ‹·è´åªå¤åˆ¶ä¸€å±‚å¯¹è±¡çš„å±æ€§

  ```javascript
  var o1 = {a: 1}
  var o2 = o1;
  console.log(o1 === o2); // true

  var arr1 = ['darko', {age: 22}]
  var arr2 = arr1.slice();
  var arr3 = arr1.concat();
  console.log(arr1 === arr2); // false æ‹·è´çš„åªæ˜¯ä¸€ä¸ªå®ä¾‹
  console.log(arr1 === arr3); // false æ‹·è´çš„åªæ˜¯ä¸€ä¸ªå®ä¾‹
  ```

- æ·±æ‹·è´æ˜¯é€’å½’å¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰å±‚çº§

  - å®ç°æ–¹å¼ï¼šé€’å½’ã€JSON.stringifyã€JSON.parse

  ```javascript
  function deepClone(source) {
    return JSON.parse(JSON.stringify(source))
  }
  var o1 {
    arr: [1, 2, 3],
    obj : {key: 'value'},
    func: function() {
      return 1
    }
  }

  var o2 = deepClone(o1)
  console.log(o2);
  ```

å¦‚ä½•å®ç°æ·±æ‹·è´?

```javascript
var cloneObj = function(obj){
    var str, newobj = obj.constructor === Array ? [] : {};
    if(typeof obj !== 'object'){
        return;
    } else if(window.JSON){
        str = JSON.stringify(obj), //ç³»åˆ—åŒ–å¯¹è±¡
        newobj = JSON.parse(str); //è¿˜åŸ
    } else {
        for(var i in obj){
            newobj[i] = typeof obj[i] === 'object' ?
            cloneObj(obj[i]) : obj[i];
        }
    }
    return newobj;
};
```

### Date

è¾“å‡ºä»Šå¤©çš„æ—¥æœŸï¼Œä»¥YYYY-MM-DDçš„æ–¹å¼ï¼Œæ¯”å¦‚ä»Šå¤©æ˜¯2014å¹´9æœˆ26æ—¥ï¼Œåˆ™è¾“å‡º2014-09-26

```javascript
var d = new Date();
// è·å–å¹´ï¼ŒgetFullYear()è¿”å›4ä½çš„æ•°å­—
var year = d.getFullYear();
// è·å–æœˆï¼Œæœˆä»½æ¯”è¾ƒç‰¹æ®Šï¼Œ0æ˜¯1æœˆï¼Œ11æ˜¯12æœˆ
var month = d.getMonth() + 1;
// å˜æˆä¸¤ä½
month = month < 10 ? '0' + month : month;
// è·å–æ—¥
var day = d.getDate();
day = day < 10 ? '0' + day : day;
console.log(year + '-' + month + '-' + day);
```

## äº‹ä»¶

äº‹ä»¶ç»‘å®šå’Œæ™®é€šäº‹ä»¶çš„åŒºåˆ«ï¼Ÿ

> æ™®é€šäº‹ä»¶ä¸æ”¯æŒæ·»åŠ å¤šä¸ªäº‹ä»¶ï¼Œä¸”æ— æ³•å–æ¶ˆã€‚æœ€ä¸‹é¢çš„äº‹ä»¶ä¼šè¦†ç›–ä¸Šé¢çš„äº‹ä»¶ã€‚äº‹ä»¶ç»‘å®šå¯ä»¥ä¸ºä¸€ä¸ªå…ƒç´ æ·»åŠ å¤šä¸ªäº‹ä»¶ã€‚

IE å’Œ DOM äº‹ä»¶æµçš„åŒºåˆ«ï¼Ÿ

> 1. æ‰§è¡Œé¡ºåºä¸ä¸€æ ·ï¼ŒIEå±äºäº‹ä»¶å†’æ³¡ï¼ŒDOMå±äºäº‹ä»¶å…ˆæ•è·å†å†’æ³¡
> 2. å‚æ•°ä¸ä¸€æ ·
> 3. äº‹ä»¶åŠ ä¸åŠ on
> 4. IE this æŒ‡å‘ window, dom æŒ‡å‘è°ƒç”¨äº‹ä»¶å¤„ç†å‡½æ•°çš„å¯¹è±¡



åŒæ­¥(Synchronous)ä¸å¼‚æ­¥(Asynchronous)çš„åŒºåˆ«ï¼Ÿ

## RegEx

## Node

## this

call ä¸ apply çš„åŒºåˆ«ï¼Ÿ



--------------------------------------------------------------------------------------------------------
## Ajax

ä»€ä¹ˆæ˜¯ Ajaxï¼Ÿ

> Asychronous JavaScript and XMl, ç”¨äºå®ç°å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯çš„å¼‚æ­¥é€šä¿¡æ•ˆæœï¼Œå®ç°é¡µé¢çš„å±€éƒ¨åˆ·æ–°ã€‚ä¸»è¦é€šè¿‡ XMLHttlpRequest(æ ‡å‡†æµè§ˆå™¨)/ActiveXObject(IE)å¯¹è±¡ å‘é€è¯·æ±‚å®ç°å¼‚æ­¥é€šä¿¡æ•ˆæœ

å®ç° Ajax çš„åŸºæœ¬æ­¥éª¤

```javascript
var xhr = null;
if (window.XMLHttlpRequest) {
  xhr = new XMLHttlpRequest();
} else {
  xhr = new ActiveXObject('Microsoft.XMLHttlpRequest')
}

// initializes a request xhr.open(menthod, url, async, user)
xhr.open('GET', '/bar/foo.txt', true)
// è®¾ç½® http è¯·æ±‚å¤´
xhr.setRequestHeader(header, value)
// æŒ‡å®šå›è°ƒå‡½æ•°
xhr.onload = function (e) {
  if (xhr.readyState === 4) {
    if (xhr.status === 200) {
      console.log(xhr.responseText);
    } else {
      console.log(xhr.statusText);
    }
  }
}
xhr.onerror = function (e) {
  console.error(xhr.statusText)
}
// å‘é€è¯·æ±‚
xhr.send(null)
```

Ajax çš„å·¥ä½œåŸç†

> åŸç†å°±æ˜¯åœ¨ç”¨æˆ·å’ŒæœåŠ¡å™¨ä¹‹é—´åŠ ä¸€ä¸ªä¸­é—´å±‚ï¼Œä½¿ç”¨æˆ·æ“ä½œä¸æœåŠ¡å™¨å“åº”å¼‚æ­¥åŒ–ã€‚å°†ä»¥å¾€ä¸€äº›æœåŠ¡å™¨è´Ÿæ‹…çš„å·¥ä½œè½¬ç§»åˆ°å®¢æˆ·ç«¯


## æ•°ç»„å»é‡

ç®—æ³•æœ¯è¯­ï¼š

ç¨³å®šï¼šå¦‚æœaåŸæœ¬åœ¨bå‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹åaä»ç„¶åœ¨bçš„å‰é¢ï¼› ä¸ç¨³å®šï¼šå¦‚æœaåŸæœ¬åœ¨bçš„å‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹åaå¯èƒ½ä¼šå‡ºç°åœ¨bçš„åé¢ï¼›

å†…æ’åºï¼šæ‰€æœ‰æ’åºæ“ä½œéƒ½åœ¨å†…å­˜ä¸­å®Œæˆï¼› å¤–æ’åºï¼šç”±äºæ•°æ®å¤ªå¤§ï¼Œå› æ­¤æŠŠæ•°æ®æ”¾åœ¨ç£ç›˜ä¸­ï¼Œè€Œæ’åºé€šè¿‡ç£ç›˜å’Œå†…å­˜çš„æ•°æ®ä¼ è¾“æ‰èƒ½è¿›è¡Œï¼›

æ—¶é—´å¤æ‚åº¦: ä¸€ä¸ªç®—æ³•æ‰§è¡Œæ‰€è€—è´¹çš„æ—¶é—´ã€‚ ç©ºé—´å¤æ‚åº¦: è¿è¡Œå®Œä¸€ä¸ªç¨‹åºæ‰€éœ€å†…å­˜çš„å¤§å°ã€‚

[JavaScript æ•°ç»„å»é‡ #9] (https://github.com/hanzichi/underscore-analysis/issues/9)

æ–¹æ³•ä¸€ï¼Œä½¿ç”¨ `indexOf` & `array.filter`, å¤æ‚åº¦ O(n^2)

```javascript
function unique(arr) {
  var res = arr.filter(function(item, index, array) {
    return array.indexOf(item) === index;
  })
  return res;
}
```

æ–¹æ³•äºŒï¼Œä½¿ç”¨ `.push`, å¤æ‚åº¦ O(n^2)

```javascript
function unique(arr) {
  var res = [];
  for (var i = 0, len = arr.length; i < len; i++) {
    for (var j = i + 1; j < len; j++) {
      // è¿™ä¸€æ­¥ååˆ†å·§å¦™
      // å¦‚æœå‘ç°ç›¸åŒå…ƒç´ 
      // åˆ™ i è‡ªå¢è¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯æ¯”è¾ƒ
      if (a[i] === a[j])
        // ä¸ºä»€ä¹ˆä¸æ˜¯ i++
        j = ++i
    }
    res.push(arr[i])
  }
  return res;
}
```

æ–¹æ³•ä¸‰ï¼Œ`.sort()`

```javascript
function unique(arr) {
  return arr.concat().sort().filter(function (item, pos, array) {
    return !pos || item != array[pos - 1]
  })
}
```

æ–¹æ³•å››

```javascript
function unique(arr) {
  var seen = {}

  return a.filter(function (item) {
    return seen.hasOwnProperty(item) ? false : (seen[item] = true);
  })
}
```

æ–¹æ³•äº”ï¼ˆES6ï¼‰

```javascript
function unique(arr) {
  return Array.from(new Set(arr))
}
```
